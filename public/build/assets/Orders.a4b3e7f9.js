import{r as p,o as m,G as b,$ as i,a as _,c as h,w as n,b as e,d as l,e as u}from"./app.ce457f82.js";import{e as d,D as f}from"./dataTables.bootstrap5.70a6cae5.js";import"./dataTables.responsive.8efb66d5.js";import"./bootstrap.340423f1.js";import{_ as y}from"./GenericLayout.8f1189b8.js";import{_ as v}from"./ModalComponent.f6da0b6e.js";import"./app.min.d6281013.js";import"./index.708f271e.js";import"./_plugin-vue_export-helper.cdc0426e.js";const g={class:"card"},$=e("div",{class:"card-header"},[e("h5",null,"Customer Orders"),e("button",{type:"button",id:"modalBtn","data-bs-toggle":"modal","data-bs-target":"#exampleModal",class:"hidden",style:{display:"none"}})],-1),w={class:"card-body"},A=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Delivery Location"),e("th",null,"Contact Number"),e("th",null,"Status"),e("th",null,"Created At"),e("th",null,"Actions")])],-1),k=e("thead",null,[e("tr",null,[e("th",null,"Product"),e("th",null,"Qty"),e("th",null,"Unit Price"),e("th",null,"Total")])],-1),S={__name:"Orders",props:{orders:Array},setup(c){d.use(f);const r=p([]);return m(()=>{document.getElementById("dt").addEventListener("click",function(o){if(o.target.nodeName!=="BUTTON")return;const s=o.target,t=s.getAttribute("data-ref");switch(s.getAttribute("data-type")){case"view":s.setAttribute("disabled",!0),fetch(`/orders/${t}`,{headers:{Accept:"application/json","X-XSRF-TOKEN":decodeURIComponent(document.cookie.split(";").filter(a=>a.startsWith("XSRF-TOKEN"))[0].split("=")[1])}}).then(a=>a.json()).then(a=>{r.value=a.productOptions,i("#modalBtn").click(),s.removeAttribute("disabled")}).catch(a=>{s.removeAttribute("disabled"),console.log("error fetching order products",a)});break;case"pay":b.Inertia.visit(`/invoive/${t}`)}}),i("#exampleModal").on("hide.bs.modal",function(){console.log("fuckshit"),r.value=[]})}),(o,s)=>(_(),h(y,null,{default:n(()=>[e("div",g,[$,e("div",w,[l(u(d),{id:"dt",class:"display table table-responsive",options:{responsive:!0},data:c.orders,columns:[{data:"ref"},{data:null,render:t=>t.user_address?t.user_address.location:t.location},{data:null,render:t=>t.user_address?t.user_address.phone_number:t.phone_number},{data:"status",render:t=>t?"<span class='badge bg-success'>Paid</span>":"<span class='badge bg-warning'>Pending Payment</span>"},{data:"created_at",render:t=>new Date(t).toDateString()},{data:null,render:t=>t.status?`<button class='btn btn-primary btn-sm mr-3' data-ref='${t.ref}' data-type='view'>View</button>`:`<button class='btn btn-primary btn-sm mr-3' data-ref='${t.ref}' data-type='view'>View</button> <button class='btn btn-primary btn-sm' data-id='${t.ref}' data-type='pay'>Make Payment</button>`}]},{default:n(()=>[A]),_:1},8,["data","columns"])])]),l(v,{title:"Purchased Products"},{default:n(()=>[l(u(d),{class:"display table table-responsive",data:r.value,columns:[{data:null,render:t=>`${t.product.name} - ${t.variation}`},{data:"pivot.quantity"},{data:"selling_price"},{data:null,render:t=>`${t.selling_price*t.pivot.quantity}`}]},{default:n(()=>[k]),_:1},8,["data","columns"])]),_:1})]),_:1}))}};export{S as default};
