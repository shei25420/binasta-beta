import{u as S,r as h,o as N,$ as g,a,c as B,w as m,b as t,g as l,p as f,F as y,t as n,d as w,e as i,f as _,v as p,h as b,i as E,k as P}from"./app.31ce84c9.js";import{e as k,D as T}from"./dataTables.bootstrap5.0b9e50b0.js";import"./dataTables.responsive.611cbfd7.js";import{_ as F}from"./GenericLayout.36782eb1.js";import{_ as U}from"./ModalComponent.e52c307b.js";import"./app.min.c47739ca.js";import"./index.54645867.js";import"./_plugin-vue_export-helper.cdc0426e.js";const I={class:"row"},M={class:"col-md-12"},q={class:"card mb-4"},A={class:"card-body"},D={class:"row"},O={class:"col-md-5"},$=["data-src"],C={class:"col-md-7"},L={class:"d-flex justify-content-between align-items-start mt-4 mt-md-0"},W={class:"small text-muted mb-2"},j={key:0,class:"badge bg-success"},R={key:1,class:"badge badge-danger"},H=["innerHTML"],z={class:"card"},G={class:"card-header"},J={class:"nav nav-pills",role:"tablist"},K=t("li",{class:"nav-item"},[t("a",{class:"nav-link active",id:"description-tab","data-bs-toggle":"tab",href:"#description",role:"tab","aria-controls":"description","aria-selected":"true"},"Product Variations")],-1),Q={class:"nav-item"},X={class:"nav-link",id:"sss-tab","data-bs-toggle":"tab",href:"#sss",role:"tab","aria-controls":"sss","aria-selected":"false"},Y={class:"card-body"},Z={class:"tab-content"},tt={class:"tab-pane fade show active",id:"description",role:"tabpanel","aria-labelledby":"description-tab"},et=t("button",{type:"button",id:"modalBtn","data-bs-toggle":"modal","data-bs-target":"#exampleModal",class:"btn btn-sm mb-2 btn-icon btn-primary"},[t("i",{class:"bi bi-plus-circle"}),P(" Add Variation ")],-1),st=t("thead",null,[t("tr",null,[t("th",null,"Variation"),t("th",null,"Buying Price"),t("th",null,"Selling Price"),t("th",null,"Wholesale Price"),t("th",null,"Sold"),t("th",null,"Stock"),t("th",null,"Created At"),t("th",null,"Actions")])],-1),it={class:"tab-pane fade",id:"sss",role:"tabpanel","aria-labelledby":"sss-tab"},ot={class:"row"},at={class:"col-lg-8"},lt=t("div",{class:"mb-5"},[t("div",{class:"display-6"},"4.0"),t("div",{class:"d-flex gap-2 my-3"},[t("i",{class:"bi bi-star-fill icon-lg text-warning"}),t("i",{class:"bi bi-star-fill icon-lg text-warning"}),t("i",{class:"bi bi-star-fill icon-lg text-warning"}),t("i",{class:"bi bi-star-fill icon-lg text-warning"}),t("i",{class:"bi bi-star-fill icon-lg text-muted"}),t("span",null,"(3)")])],-1),rt={class:"list-group list-group-flush mb-4"},nt=t("div",{class:"avatar flex-shrink-0 me-3"},[t("span",{class:"avatar-text bg-purple rounded-circle"},"R")],-1),dt=t("h5",{class:"mb-1"},"Rodger Stutely",-1),ct=t("div",{class:"d-flex gap-2 mb-3"},[t("i",{class:"bi bi-star-fill text-warning"}),t("i",{class:"bi bi-star-fill text-warning"}),t("i",{class:"bi bi-star-fill text-warning"}),t("i",{class:"bi bi-star-fill text-warning"}),t("i",{class:"bi bi-star-fill text-muted"})],-1),ut=["onSubmit"],_t={class:"row"},pt={class:"col"},bt={class:"form-group"},mt=t("label",{for:"Variation"},"Variation",-1),vt={key:0,class:"invalid-feedback"},ht={class:"col"},gt={class:"form-group"},ft=t("label",{for:"Variation"},"Stock",-1),yt={key:0,class:"invalid-feedback"},wt={class:"row mt-3"},kt={class:"col"},xt={class:"form-group"},Vt=t("label",{for:"Buying Price"},"Buying Price",-1),St={key:0,class:"invalid-feedback"},Nt={class:"col"},Bt={class:"form-group"},Et=t("label",{for:"Selling Price"},"Selling Price",-1),Pt={key:0,class:"invalid-feedback"},Tt={class:"row mt-3"},Ft={class:"col"},Ut={class:"form-group"},It=t("label",{for:"Selling Price"},"Wholesale Price",-1),Mt={key:0,class:"invalid-feedback"},qt={class:"col"},At={class:"form-group"},Dt=t("label",{for:"Wholesale Mininum"},"Wholesale Minimum",-1),Ot={key:0,class:"invalid-feedback"},$t={class:"row mt-4"},Ct={class:"col"},Lt=t("button",{type:"button",class:"btn btn-danger",style:{"margin-right":"10px"},"data-bs-dismiss":"modal"},"Close",-1),Wt={id:"submitBtn",type:"submit",class:"btn btn-primary"},Xt={__name:"ProductView",props:{product:Object},setup(c){const v=c;k.use(T);const e=S({variation:"",buying_price:0,selling_price:0,wholesale_price:0,wholesale_min:1,stock:0,product_id:v.product.id}),u=h(!1),r=h(null),x=()=>{if(e.clearErrors(),(!e.variation||e.variation.trim()=="")&&e.setError("variation","variation field is required"),(!e.buying_price||parseFloat(e.buying_price)===NaN)&&e.setError("buying_price","buying price field is requried"),(!e.selling_price||parseFloat(e.selling_price)===NaN)&&e.setError("selling_price","selling price field is required"),(!e.wholesale_price||parseFloat(e.wholesale_price)===NaN)&&e.setError("wholesale_price","whole sale price is required"),(!e.wholesale_min||parseInt(e.wholesale_min)===NaN)&&e.setError("wholesale minimum field is required"),(!e.stock||parseInt(e.stock)===NaN)&&e.setError("stock","stock field is required"),(!e.product_id||parseInt(e.product_id)===NaN)&&e.setError("product_id","product field is required"),e.errors&&Object.keys(e.errors).length)return;const d=document.getElementById("submitBtn");u.value?(d.innerText="Updating...",e.put(`/product_options/${r.value.id}`,{onSuccess(){u.value=!1,r.value=null,e.reset(),d.innerText="Save"},onError(){d.innerText="Update"}})):(d.innerText="Saving...",e.post("/product_options",{onSuccess(){e.reset()},onFinish(){d.innerText="Save"}}))};return N(()=>{document.getElementById("dt").addEventListener("click",function(d){if(d.target.nodeName!=="BUTTON")return;const o=parseInt(d.target.getAttribute("data-id")),s=d.target.getAttribute("data-type");s==="del"?confirm("Are you sure you want to delete this product variation?")&&e.delete(`/product_options/${o}`):s==="edit"&&(r.value=v.product.product_options.filter(({id:V})=>V==o)[0],e.variation=r.value.variation,e.buying_price=parseFloat(r.value.buying_price),e.selling_price=parseFloat(r.value.selling_price),e.wholesale_price=parseFloat(r.value.wholesale_price),e.wholesale_min=parseInt(r.value.wholesale_min),e.stock=parseInt(r.value.stock),e.product_id=parseInt(r.value.product_id),u.value=!0,g("#modalBtn").click())}),g("#exampleModal").on("hide.bs.modal",function(){u.value&&(e.reset(),u.value=!1,r.value=null)})}),(d,o)=>(a(),B(F,null,{default:m(()=>[t("div",I,[t("div",M,[t("div",q,[t("div",A,[t("div",D,[t("div",O,[(a(!0),l(y,null,f(c.product.images,s=>(a(),l("div",{key:s.id,class:"slider mb-3"},[t("img",{src:"/shop/imgs/theme/img_loading.gif","data-src":"/storage/"+s.url,class:"w-100 rounded lazy",alt:"image"},null,8,$)]))),128))]),t("div",C,[t("div",L,[t("div",null,[t("div",W,n(c.product.category_name),1),t("h2",null,n(c.product.name),1),t("p",null,[c.product.stock?(a(),l("span",j,"In stock")):(a(),l("span",R,"Out Of Stock"))]),t("p",{innerHTML:c.product.description},null,8,H),t("div",z,[t("div",G,[t("ul",J,[K,t("li",Q,[t("a",X,"Customer Reviews ("+n(c.product.user_reviews.length)+")",1)])])]),t("div",Y,[t("div",Z,[t("div",tt,[et,w(i(k),{id:"dt",class:"display table table-responsive",options:{responsive:!0},data:c.product.product_options,columns:[{data:"variation"},{data:"buying_price"},{data:"selling_price"},{data:"wholesale_price"},{data:"sold"},{data:"stock"},{data:"created_at",render:s=>new Date(s).toDateString()},{data:null,render:s=>`<button data-type=edit data-id=${s.id} class='btn btn-sm btn-secondary mr-3'>Edit</button> <button data-type=del data-id=${s.id} class='btn btn-sm btn-danger'>Delete</button>`}]},{default:m(()=>[st]),_:1},8,["data","columns"])]),t("div",it,[t("div",ot,[t("div",at,[lt,t("div",rt,[(a(!0),l(y,null,f(c.product.user_reviews,s=>(a(),l("div",{class:"list-group-item d-flex px-0",key:s.id},[nt,t("div",null,[dt,ct,t("div",null,n(s.review),1)])]))),128))])])])])])])])])])])])])])])]),w(U,{title:u.value?"Update Variation":"Add Variation"},{default:m(()=>[t("form",{onSubmit:E(x,["prevent"])},[t("div",_t,[t("div",pt,[t("div",bt,[mt,_(t("input",{"onUpdate:modelValue":o[0]||(o[0]=s=>i(e).variation=s),type:"text",class:"form-control"},null,512),[[p,i(e).variation]]),i(e).errors.variation?(a(),l("div",vt,n(i(e).errors.variation),1)):b("",!0)])]),t("div",ht,[t("div",gt,[ft,_(t("input",{"onUpdate:modelValue":o[1]||(o[1]=s=>i(e).stock=s),type:"text",class:"form-control"},null,512),[[p,i(e).stock]]),i(e).errors.stock?(a(),l("div",yt,n(i(e).errors.stock),1)):b("",!0)])])]),t("div",wt,[t("div",kt,[t("div",xt,[Vt,_(t("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=s=>i(e).buying_price=s),class:"form-control"},null,512),[[p,i(e).buying_price]]),i(e).errors.buying_price?(a(),l("div",St,n(i(e).errors.buying_price),1)):b("",!0)])]),t("div",Nt,[t("div",Bt,[Et,_(t("input",{type:"text","onUpdate:modelValue":o[3]||(o[3]=s=>i(e).selling_price=s),class:"form-control"},null,512),[[p,i(e).selling_price]]),i(e).errors.selling_price?(a(),l("div",Pt,n(i(e).errors.selling_price),1)):b("",!0)])])]),t("div",Tt,[t("div",Ft,[t("div",Ut,[It,_(t("input",{type:"text","onUpdate:modelValue":o[4]||(o[4]=s=>i(e).wholesale_price=s),class:"form-control"},null,512),[[p,i(e).wholesale_price]]),i(e).errors.wholesale_price?(a(),l("div",Mt,n(i(e).errors.wholesale_price),1)):b("",!0)])]),t("div",qt,[t("div",At,[Dt,_(t("input",{type:"text","onUpdate:modelValue":o[5]||(o[5]=s=>i(e).wholesale_min=s),class:"form-control"},null,512),[[p,i(e).wholesale_min]]),i(e).errors.wholesale_min?(a(),l("div",Ot,n(i(e).errors.wholesale_min),1)):b("",!0)])])]),t("div",$t,[t("div",Ct,[Lt,t("button",Wt,n(u.value?"Update":"Save"),1)])])],40,ut)]),_:1},8,["title"])]),_:1}))}};export{Xt as default};
