import{r as p,o as f,a as u,c as y,w as I,b as t,t as n,k as h,g as m,p as w,F as x,h as S,i as b,e as C}from"./app.193fc533.js";import{_ as P}from"./GenericLayout.0d75cf39.js";import{u as N}from"./index.fcae608c.js";import"./app.min.69abaa6c.js";import"./_plugin-vue_export-helper.cdc0426e.js";const q=t("div",{class:"mb-4"},[t("nav",{"aria-label":"breadcrumb"},[t("ol",{class:"breadcrumb"},[t("li",{class:"breadcrumb-item"},[t("a",{href:"#"},[t("i",{class:"bi bi-globe2 small me-2"}),h(" Dashboard ")])]),t("li",{class:"breadcrumb-item active","aria-current":"page"},"Product Detail")])])],-1),B={class:"row"},D={class:"col-md-12"},F={class:"card mb-4"},M={class:"card-body"},T={class:"row"},V={class:"col-md-5"},A={class:"slider-for mb-3"},E=["data-src"],L={class:"col-md-7"},O={class:"d-flex justify-content-between align-items-start mt-4 mt-md-0"},j=t("div",{class:"small text-muted mb-2"},"Distributor Packages",-1),H=t("p",null,[t("span",{class:"badge bg-success"},"In stock")],-1),J=["innerHTML"],z={class:"d-flex gap-3 mb-3 align-items-center"},Q={key:0,class:"text-muted mb-0"},R={class:"mb-0"},$={class:"row row-cols-lg-auto"},G=["onSubmit"],K={class:"col-12"},U={class:"input-group"},W=["onChange"],X=["value"],st={__name:"PackageView",props:{distributor_package:Object},setup(s){const i=s,r=p(1);let o=p(!1);const c=N("cart",[]),_=e=>{let a=0,l=0,g=i.distributor_package.discounts.length?(100-i.distributor_package.discounts[0].percentage)/100:0;return e.forEach(d=>{l+=parseFloat(d.price)*parseInt(d.min),a+=parseFloat(d.price)*parseInt(d.min)}),a=g?g*a:a,[a,l]},v=()=>{if(o.value)c.value=c.value.filter(e=>e.distributor_package.id!==i.distributor_package.id),o.value=!1;else{if(c.value.some(e=>parseInt(e.distributor_package.id)===parseInt(i.distributor_package.id)))return;c.value.push({distributor_package:i.distributor_package,qty:r.value}),o.value=!0}},k=e=>{r.value=e.target.value,o.value&&(c.value.forEach(a=>{parseInt(a.distributor_package.id)===parseInt(i.distributor_package.id)&&(a.qty=r.value)}),localStorage.setItem("cart",JSON.stringify(c)))};return f(()=>{const e=localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):null;e&&(o.value=e.some(a=>parseInt(a.distributor_package.id)===parseInt(i.distributor_package.id)?(r.value=a.qty,!0):!1))}),(e,a)=>(u(),y(P,null,{default:I(()=>[q,t("div",B,[t("div",D,[t("div",F,[t("div",M,[t("div",T,[t("div",V,[t("div",A,[t("img",{src:"/shop/imgs/theme/img_loading.gif","data-src":"/storage/"+s.distributor_package.image_path,class:"lazy w-100 rounded",alt:"image"},null,8,E)])]),t("div",L,[t("div",O,[t("div",null,[j,t("h2",null,n(s.distributor_package.name),1),H,t("p",{innerHTML:s.distributor_package.description},null,8,J),t("p",null,[h(" Package Contents: "),t("ul",null,[(u(!0),m(x,null,w(s.distributor_package.product_options,l=>(u(),m("li",{key:l.id},n(l.product.name)+" - "+n(l.variation),1))),128))])]),t("div",z,[s.distributor_package.discounts.length?(u(),m("h4",Q,[t("del",null,"ksh."+n(_(s.distributor_package.product_options)[0]*r.value),1)])):S("",!0),t("h4",R,"ksh."+n(_(s.distributor_package.product_options)[1]*r.value),1)]),t("div",$,[t("form",{onSubmit:b(v,["prevent"])},[t("div",K,[t("div",U,[t("input",{type:"number",class:"form-control",min:"1",onChange:b(k,["prevent"]),value:1},null,40,W),t("input",{class:"btn btn-primary",type:"submit",value:C(o)?"Remove from cart":"Add to cart"},null,8,X)])])],40,G)])])])])])])])])])]),_:1}))}};export{st as default};
