import{u as B,r as m,o as C,$ as f,a as d,c as k,w as l,b as t,d as p,e as o,f as b,v,g as _,t as u,h as g,i as A,k as N}from"./app.1ac5e0b9.js";import{e as h,D as S}from"./dataTables.bootstrap5.b1186638.js";import"./dataTables.responsive.219a163f.js";import{_ as T}from"./ModalComponent.d806c712.js";import{_ as E}from"./GenericLayout.1e147c90.js";import"./app.min.11b0299a.js";import"./_plugin-vue_export-helper.cdc0426e.js";const V={class:"card"},D=t("div",{class:"card-header"},[t("h5",null,"Binapoints Configurations"),t("button",{type:"button",id:"modalBtn","data-bs-toggle":"modal","data-bs-target":"#exampleModal",class:"btn btn-icon btn-primary"},[t("i",{class:"bi bi-plus-circle"}),N(" Add Config ")])],-1),U={class:"card-body"},$=t("thead",null,[t("tr",null,[t("th",null,"Awarded Points"),t("th",null,"Points Value"),t("th",null,"Created At"),t("th",null,"Actions")])],-1),F=["onSubmit"],M={class:"form-group"},P=t("label",null,"Awarded Points",-1),q={key:0,class:"invalid-feedback"},I={class:"form-group mt-3"},O=t("label",null,"Points Value (optional)",-1),j={key:0,class:"invalid-feedback"},L={class:"form-group mt-4"},z=t("button",{type:"button",class:"btn btn-danger",style:{"margin-right":"10px"},"data-bs-dismiss":"modal"},"Close",-1),G={id:"submitBtn",type:"submit",class:"btn btn-primary"},Y={__name:"BinapointsConfigurations",props:{configurations:Array},setup(c){const y=c;h.use(S);const e=B({awarded:0,value:0}),s=m(!1),i=m(null),w=()=>{if(e.clearErrors(),!e.awarded&&parseFloat(e.awarded)==NaN&&e.setError("awarded","Awarded field is required"),!e.value&&parseFloat(e.value)==NaN&&e.setError("value","Value field is required"),e.errors&&Object.keys(e.errors).length)return;const n=document.getElementById("submitBtn");s.value?(n.innerText="Updating...",e.put(`/configurations/${i.value.id}`,{onSuccess(){s.value=!1,i.value=null,e.reset(),n.innerText="Save"},onError(){n.innerText="Update"}})):(n.innerText="Saving...",e.post("/configurations",{onSuccess(){e.reset()},onFinish(){n.innerText="Save"}}))};return C(()=>{document.getElementById("dt").addEventListener("click",function(n){if(n.target.nodeName!=="BUTTON")return;const r=n.target.getAttribute("data-id"),a=n.target.getAttribute("data-type");a==="del"?confirm("Are you sure you want to delete this config?")&&e.delete(`/configurations/${r}`):a==="edit"&&(i.value=y.configurations.filter(({id:x})=>x==r)[0],e.awarded=i.value.awarded,e.value=i.value.value,s.value=!0,f("#modalBtn").click())}),f("#exampleModal").on("hide.bs.modal",function(){s.value&&(s.value=!1,i.value=null,e.awarded=0,e.value=0)})}),(n,r)=>(d(),k(E,null,{default:l(()=>[t("div",V,[D,t("div",U,[p(o(h),{id:"dt",class:"display table table-responsive",options:{responsive:!0},data:c.configurations,columns:[{data:"awarded"},{data:"value"},{data:"created_at",render:a=>new Date(a).toDateString()},{data:null,render:a=>`<button class='btn btn-sm btn-secondary mr-3' data-type='edit' data-id='${a.id}'>Edit</button> <button class='btn btn-sm btn-danger' data-type='del' data-id='${a.id}'>Delete</button>`}]},{default:l(()=>[$]),_:1},8,["data","columns"])])]),p(T,{title:s.value?"Update Configuration":"Add Configuration"},{default:l(()=>[t("form",{onSubmit:A(w,["prevent"])},[t("div",M,[P,b(t("input",{type:"number",class:"form-control","onUpdate:modelValue":r[0]||(r[0]=a=>o(e).awarded=a)},null,512),[[v,o(e).awarded]]),o(e).errors.awarded?(d(),_("div",q,u(o(e).errors.awarded),1)):g("",!0)]),t("div",I,[O,b(t("input",{type:"number","onUpdate:modelValue":r[1]||(r[1]=a=>o(e).value=a),class:"form-control"},null,512),[[v,o(e).value]]),o(e).errors.value?(d(),_("div",j,u(o(e).errors.value),1)):g("",!0)]),t("div",L,[z,t("button",G,u(s.value?"Update":"Save"),1)])],40,F)]),_:1},8,["title"])]),_:1}))}};export{Y as default};
