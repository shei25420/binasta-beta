import{r as p,o as m,$ as i,a as _,c as b,w as s,b as e,d as l,e as u}from"./app.5a4f4dca.js";import{e as d,D as h}from"./dataTables.bootstrap5.b7006f58.js";import"./dataTables.responsive.72dfe19a.js";import"./bootstrap.f1d0a72a.js";import{_ as f}from"./GenericLayout.e89dcb7e.js";import{_ as y}from"./ModalComponent.a7a9da37.js";import"./app.min.336110c7.js";import"./index.8ed95ae7.js";import"./_plugin-vue_export-helper.cdc0426e.js";const g={class:"card"},v=e("div",{class:"card-header"},[e("h5",null,"My Orders"),e("button",{type:"button",id:"modalBtn","data-bs-toggle":"modal","data-bs-target":"#exampleModal",class:"hidden",style:{display:"none"}})],-1),$={class:"card-body"},w=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Delivery Location"),e("th",null,"Contact Number"),e("th",null,"Status"),e("th",null,"Created At"),e("th",null,"Actions")])],-1),A=e("thead",null,[e("tr",null,[e("th",null,"Product"),e("th",null,"Qty"),e("th",null,"Unit Price"),e("th",null,"Total")])],-1),C={__name:"Orders",props:{orders:Array},setup(c){d.use(h);const r=p([]);return m(()=>{document.getElementById("dt").addEventListener("click",function(o){if(o.target.nodeName!=="BUTTON")return;const n=o.target,t=n.getAttribute("data-ref");n.setAttribute("disabled",!0),fetch(`/orders/${t}`,{headers:{Accept:"application/json","X-XSRF-TOKEN":decodeURIComponent(document.cookie.split(";").filter(a=>a.startsWith("XSRF-TOKEN"))[0].split("=")[1])}}).then(a=>a.json()).then(a=>{r.value=a.productOptions,i("#modalBtn").click(),n.removeAttribute("disabled")}).catch(a=>{n.removeAttribute("disabled"),console.log("error fetching order products",a)})}),i("#exampleModal").on("hide.bs.modal",function(){console.log("fuckshit"),r.value=[]})}),(o,n)=>(_(),b(f,null,{default:s(()=>[e("div",g,[v,e("div",$,[l(u(d),{id:"dt",class:"display table table-responsive",options:{responsive:!0},data:c.orders,columns:[{data:"ref"},{data:null,render:t=>t.user_address?t.user_address.location:t.location},{data:null,render:t=>t.user_address?t.user_address.phone_number:t.phone_number},{data:"status",render:t=>t?"<span class='badge bg-success'>Paid</span>":"<span class='badge bg-warning'>Pending Payment</span>"},{data:"created_at",render:t=>new Date(t).toDateString()},{data:null,render:t=>t.status?`<button class='btn btn-primary btn-sm mr-3' data-ref='${t.ref}' data-type='view'>View</button>`:`<button class='btn btn-primary btn-sm mr-3' data-ref='${t.ref}' data-type='view'>View</button> <button class='btn btn-primary btn-sm' data-id='${t.ref}' data-type='pay'>Make Payment</button>`}]},{default:s(()=>[w]),_:1},8,["data","columns"])])]),l(y,{title:"Purchased Products"},{default:s(()=>[l(u(d),{class:"display table table-responsive",data:r.value,columns:[{data:null,render:t=>`${t.product.name} - ${t.variation}`},{data:"pivot.quantity"},{data:"selling_price"},{data:null,render:t=>`${t.selling_price*t.pivot.quantity}`}]},{default:s(()=>[A]),_:1},8,["data","columns"])]),_:1})]),_:1}))}};export{C as default};
