import{u as B,r as m,o as C,$ as f,a as d,c as k,w as l,b as e,d as p,e as o,f as b,v,g as _,t as u,h as g,i as A,k as N}from"./app.31ce84c9.js";import{e as h,D as S}from"./dataTables.bootstrap5.0b9e50b0.js";import"./dataTables.responsive.611cbfd7.js";import{_ as T}from"./ModalComponent.e52c307b.js";import{_ as E}from"./GenericLayout.36782eb1.js";import"./app.min.c47739ca.js";import"./index.54645867.js";import"./_plugin-vue_export-helper.cdc0426e.js";const V={class:"card"},D=e("div",{class:"card-header"},[e("h5",null,"Binapoints Configurations"),e("button",{type:"button",id:"modalBtn","data-bs-toggle":"modal","data-bs-target":"#exampleModal",class:"btn btn-icon btn-primary"},[e("i",{class:"bi bi-plus-circle"}),N(" Add Config ")])],-1),U={class:"card-body"},$=e("thead",null,[e("tr",null,[e("th",null,"Awarded Points"),e("th",null,"Points Value"),e("th",null,"Created At"),e("th",null,"Actions")])],-1),F=["onSubmit"],M={class:"form-group"},P=e("label",null,"Awarded Points",-1),q={key:0,class:"invalid-feedback"},I={class:"form-group mt-3"},O=e("label",null,"Points Value (optional)",-1),j={key:0,class:"invalid-feedback"},L={class:"form-group mt-4"},z=e("button",{type:"button",class:"btn btn-danger",style:{"margin-right":"10px"},"data-bs-dismiss":"modal"},"Close",-1),G={id:"submitBtn",type:"submit",class:"btn btn-primary"},Z={__name:"BinapointsConfigurations",props:{configurations:Array},setup(c){const y=c;h.use(S);const t=B({awarded:0,value:0}),s=m(!1),i=m(null),w=()=>{if(t.clearErrors(),!t.awarded&&parseFloat(t.awarded)==NaN&&t.setError("awarded","Awarded field is required"),!t.value&&parseFloat(t.value)==NaN&&t.setError("value","Value field is required"),t.errors&&Object.keys(t.errors).length)return;const n=document.getElementById("submitBtn");s.value?(n.innerText="Updating...",t.put(`/configurations/${i.value.id}`,{onSuccess(){s.value=!1,i.value=null,t.reset(),n.innerText="Save"},onError(){n.innerText="Update"}})):(n.innerText="Saving...",t.post("/configurations",{onSuccess(){t.reset()},onFinish(){n.innerText="Save"}}))};return C(()=>{document.getElementById("dt").addEventListener("click",function(n){if(n.target.nodeName!=="BUTTON")return;const r=n.target.getAttribute("data-id"),a=n.target.getAttribute("data-type");a==="del"?confirm("Are you sure you want to delete this config?")&&t.delete(`/configurations/${r}`):a==="edit"&&(i.value=y.configurations.filter(({id:x})=>x==r)[0],t.awarded=i.value.awarded,t.value=i.value.value,s.value=!0,f("#modalBtn").click())}),f("#exampleModal").on("hide.bs.modal",function(){s.value&&(s.value=!1,i.value=null,t.awarded=0,t.value=0)})}),(n,r)=>(d(),k(E,null,{default:l(()=>[e("div",V,[D,e("div",U,[p(o(h),{id:"dt",class:"display table table-responsive",options:{responsive:!0},data:c.configurations,columns:[{data:"awarded"},{data:"value"},{data:"created_at",render:a=>new Date(a).toDateString()},{data:null,render:a=>`<button class='btn btn-sm btn-secondary mr-3' data-type='edit' data-id='${a.id}'>Edit</button> <button class='btn btn-sm btn-danger' data-type='del' data-id='${a.id}'>Delete</button>`}]},{default:l(()=>[$]),_:1},8,["data","columns"])])]),p(T,{title:s.value?"Update Configuration":"Add Configuration"},{default:l(()=>[e("form",{onSubmit:A(w,["prevent"])},[e("div",M,[P,b(e("input",{type:"number",class:"form-control","onUpdate:modelValue":r[0]||(r[0]=a=>o(t).awarded=a)},null,512),[[v,o(t).awarded]]),o(t).errors.awarded?(d(),_("div",q,u(o(t).errors.awarded),1)):g("",!0)]),e("div",I,[O,b(e("input",{type:"number","onUpdate:modelValue":r[1]||(r[1]=a=>o(t).value=a),class:"form-control"},null,512),[[v,o(t).value]]),o(t).errors.value?(d(),_("div",j,u(o(t).errors.value),1)):g("",!0)]),e("div",L,[z,e("button",G,u(s.value?"Update":"Save"),1)])],40,F)]),_:1},8,["title"])]),_:1}))}};export{Z as default};
